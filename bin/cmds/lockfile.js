"use strict";
/**
 * Created by user on 2019/5/19.
 */
const cmd_dir_1 = require("../../lib/cmd_dir");
const index_1 = require("../../lib/index");
const yarnlock_1 = require("../../lib/yarnlock");
const semver_1 = require("semver");
const COMMAND_KEY = cmd_dir_1.basenameStrip(__filename);
const cmdModule = cmd_dir_1.createCommandModuleExports({
    command: cmd_dir_1.basenameStrip(__filename),
    //aliases: [],
    describe: `show yarn.lock info`,
    builder(yargs) {
        return yargs
            .option('duplicate', {
            alias: ['D'],
            desc: `show duplicate list by yarn.lock`,
            boolean: true,
        })
            .example(`$0 ${COMMAND_KEY} --duplicate`, `show duplicate list by yarn.lock`)
            .example(`$0 ${COMMAND_KEY} --duplicate false`, `show packages list by yarn.lock`);
    },
    handler(argv) {
        const key = COMMAND_KEY;
        //let rootData = findRoot(argv, true);
        //let yl = fsYarnLock(rootData.root);
        if (argv.duplicate || !argv.duplicate) {
            _showYarnLockList(argv);
        }
    },
});
function _is(argv) {
    return true;
}
function _fix(argv) {
    return argv;
}
function _showYarnLockList(argv) {
    let rootData = index_1.findRoot(argv, true);
    let yl = index_1.fsYarnLock(rootData.root);
    let yarnlock_old_obj = yarnlock_1.parse(yl.yarnlock_old);
    let fy = yarnlock_1.exportYarnLock(yarnlock_old_obj);
    let ks = Object.keys(fy.installed);
    let max = 0;
    let len = 0;
    let ks2 = ks
        .reduce((a, name) => {
        let arr = fy.installed[name];
        if (!argv.duplicate || arr.length > 1) {
            index_1.console.log(name);
            try {
                arr = arr.sort(semver_1.rcompare).reverse();
            }
            catch (e) {
            }
            let arr2 = arr.slice(0, -1);
            if (arr2.length) {
                index_1.console.log('├─', arr2.join('\n├─ '));
                len += arr2.length;
            }
            index_1.console.log('└─', arr[arr.length - 1]);
            max = Math.max(max, arr.length);
            a.push(name);
        }
        return a;
    }, []);
    let chalk = index_1.console.chalk;
    if (argv.duplicate) {
        // @ts-ignore
        index_1.console.cyan.info(`\nFound duplicate in ${chalk.yellow(ks2.length)} packages, ${chalk.yellow(len)}/${chalk.yellow(len + ks2.length)} installed version, highest is ${max}, in total ${ks.length} packages`);
    }
    else {
        // @ts-ignore
        index_1.console.cyan.info(`\nTotal ${chalk.yellow(ks.length)} packages, with ${chalk.yellow(len)}/${chalk.yellow(len + ks2.length)} installed version`);
    }
    if (len > 0) {
        const terminalLink = require('terminal-link');
        const link = terminalLink('see here', 'https://yarnpkg.com/docs/selective-version-resolutions/', {
            fallback(text, url) {
                return text + ' ' + url;
            }
        });
        index_1.console.cyan.info(`You can try add they to ${index_1.console.chalk.yellow('resolutions')} in package.json, for force package dedupe, ${link}`);
    }
    return true;
}
module.exports = cmdModule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9ja2ZpbGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsb2NrZmlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7QUFDSCwrQ0FBa0c7QUFFbEcsMkNBQThGO0FBSzlGLGlEQUE0RTtBQUM1RSxtQ0FBMEM7QUFHMUMsTUFBTSxXQUFXLEdBQUcsdUJBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUU5QyxNQUFNLFNBQVMsR0FBRyxvQ0FBMEIsQ0FBQztJQUU1QyxPQUFPLEVBQUUsdUJBQWEsQ0FBQyxVQUFVLENBQUM7SUFDbEMsY0FBYztJQUNkLFFBQVEsRUFBRSxxQkFBcUI7SUFFL0IsT0FBTyxDQUFDLEtBQUs7UUFFWixPQUFPLEtBQUs7YUFDVixNQUFNLENBQUMsV0FBVyxFQUFFO1lBQ3BCLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQztZQUNaLElBQUksRUFBRSxrQ0FBa0M7WUFDeEMsT0FBTyxFQUFFLElBQUk7U0FFYixDQUFDO2FBQ0QsT0FBTyxDQUFDLE1BQU0sV0FBVyxjQUFjLEVBQUUsa0NBQWtDLENBQUM7YUFDNUUsT0FBTyxDQUFDLE1BQU0sV0FBVyxvQkFBb0IsRUFBRSxpQ0FBaUMsQ0FBQyxDQUFBO0lBQ3BGLENBQUM7SUFFRCxPQUFPLENBQUMsSUFBSTtRQUVYLE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQztRQUV4QixzQ0FBc0M7UUFFdEMscUNBQXFDO1FBRXJDLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQ3JDO1lBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDdkI7SUFFRixDQUFDO0NBRUQsQ0FBQyxDQUFDO0FBU0gsU0FBUyxHQUFHLENBQUMsSUFBZ0Q7SUFFNUQsT0FBTyxJQUFJLENBQUM7QUFDYixDQUFDO0FBRUQsU0FBUyxJQUFJLENBQUMsSUFBZ0Q7SUFFN0QsT0FBTyxJQUFJLENBQUM7QUFDYixDQUFDO0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxJQUFnRDtJQUUxRSxJQUFJLFFBQVEsR0FBRyxnQkFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUVwQyxJQUFJLEVBQUUsR0FBRyxrQkFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVuQyxJQUFJLGdCQUFnQixHQUFHLGdCQUFhLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBRXRELElBQUksRUFBRSxHQUFHLHlCQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUUxQyxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVuQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDWixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFWixJQUFJLEdBQUcsR0FBRyxFQUFFO1NBQ1YsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFO1FBRW5CLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQ3JDO1lBQ0MsZUFBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVsQixJQUNBO2dCQUNDLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGlCQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNuQztZQUNELE9BQU8sQ0FBQyxFQUNSO2FBRUM7WUFFRCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTVCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFDZjtnQkFDQyxlQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBRXRDLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ25CO1lBRUQsZUFBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV2QyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRWhDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDWjtRQUVELE9BQU8sQ0FBQyxDQUFDO0lBQ1YsQ0FBQyxFQUFFLEVBQWMsQ0FBQyxDQUNsQjtJQUVELElBQUksS0FBSyxHQUFHLGVBQU8sQ0FBQyxLQUFLLENBQUM7SUFFMUIsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUNsQjtRQUNDLGFBQWE7UUFDYixlQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyx3QkFBd0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGNBQWMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGtDQUFrQyxHQUFHLGNBQWMsRUFBRSxDQUFDLE1BQU0sV0FBVyxDQUFDLENBQUM7S0FDMU07U0FFRDtRQUNDLGFBQWE7UUFDYixlQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUM7S0FDOUk7SUFFRCxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQ1g7UUFDQyxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDOUMsTUFBTSxJQUFJLEdBQUcsWUFBWSxDQUFDLFVBQVUsRUFBRSx5REFBeUQsRUFBRTtZQUNoRyxRQUFRLENBQUMsSUFBSSxFQUFFLEdBQUc7Z0JBRWpCLE9BQU8sSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDekIsQ0FBQztTQUNELENBQUMsQ0FBQztRQUVILGVBQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixlQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsK0NBQStDLElBQUksRUFBRSxDQUFDLENBQUM7S0FDdkk7SUFFRCxPQUFPLElBQUksQ0FBQTtBQUNaLENBQUM7QUFqR0QsaUJBQVMsU0FBUyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gMjAxOS81LzE5LlxuICovXG5pbXBvcnQgeyBiYXNlbmFtZVN0cmlwLCBjcmVhdGVDb21tYW5kTW9kdWxlRXhwb3J0cywgbGF6eVNwYXduQXJndlNsaWNlIH0gZnJvbSAnLi4vLi4vbGliL2NtZF9kaXInO1xuaW1wb3J0IHBhdGggPSByZXF1aXJlKCd1cGF0aDInKTtcbmltcG9ydCB7IGNoYWxrQnlDb25zb2xlLCBjb25zb2xlLCBjb25zb2xlRGVidWcsIGZpbmRSb290LCBmc1lhcm5Mb2NrIH0gZnJvbSAnLi4vLi4vbGliL2luZGV4JztcbmltcG9ydCB7IHJlYWRQYWNrYWdlSnNvbiB9IGZyb20gJ0B0cy10eXBlL3BhY2thZ2UtZHRzJztcbmltcG9ydCB7IHdyaXRlUGFja2FnZUpzb24gfSBmcm9tICcuLi8uLi9saWIvcGtnJztcbmltcG9ydCB7IHNvcnRQYWNrYWdlSnNvbiB9IGZyb20gJ3NvcnQtcGFja2FnZS1qc29uJztcbmltcG9ydCB7IElVbnBhY2tNeVlhcmdzQXJndiB9IGZyb20gJy4uLy4uL2xpYi9jbWRfZGlyJztcbmltcG9ydCB7IGV4cG9ydFlhcm5Mb2NrLCBwYXJzZSBhcyBwYXJzZVlhcm5Mb2NrIH0gZnJvbSAnLi4vLi4vbGliL3lhcm5sb2NrJztcbmltcG9ydCB7IFNlbVZlciwgcmNvbXBhcmUgfSBmcm9tICdzZW12ZXInO1xuaW1wb3J0IHsgQXJndW1lbnRzLCBDb21tYW5kTW9kdWxlIH0gZnJvbSAneWFyZ3MnO1xuXG5jb25zdCBDT01NQU5EX0tFWSA9IGJhc2VuYW1lU3RyaXAoX19maWxlbmFtZSk7XG5cbmNvbnN0IGNtZE1vZHVsZSA9IGNyZWF0ZUNvbW1hbmRNb2R1bGVFeHBvcnRzKHtcblxuXHRjb21tYW5kOiBiYXNlbmFtZVN0cmlwKF9fZmlsZW5hbWUpLFxuXHQvL2FsaWFzZXM6IFtdLFxuXHRkZXNjcmliZTogYHNob3cgeWFybi5sb2NrIGluZm9gLFxuXG5cdGJ1aWxkZXIoeWFyZ3MpXG5cdHtcblx0XHRyZXR1cm4geWFyZ3Ncblx0XHRcdC5vcHRpb24oJ2R1cGxpY2F0ZScsIHtcblx0XHRcdFx0YWxpYXM6IFsnRCddLFxuXHRcdFx0XHRkZXNjOiBgc2hvdyBkdXBsaWNhdGUgbGlzdCBieSB5YXJuLmxvY2tgLFxuXHRcdFx0XHRib29sZWFuOiB0cnVlLFxuXHRcdFx0XHQvL2RlZmF1bHQ6IHRydWUsXG5cdFx0XHR9KVxuXHRcdFx0LmV4YW1wbGUoYCQwICR7Q09NTUFORF9LRVl9IC0tZHVwbGljYXRlYCwgYHNob3cgZHVwbGljYXRlIGxpc3QgYnkgeWFybi5sb2NrYClcblx0XHRcdC5leGFtcGxlKGAkMCAke0NPTU1BTkRfS0VZfSAtLWR1cGxpY2F0ZSBmYWxzZWAsIGBzaG93IHBhY2thZ2VzIGxpc3QgYnkgeWFybi5sb2NrYClcblx0fSxcblxuXHRoYW5kbGVyKGFyZ3YpXG5cdHtcblx0XHRjb25zdCBrZXkgPSBDT01NQU5EX0tFWTtcblxuXHRcdC8vbGV0IHJvb3REYXRhID0gZmluZFJvb3QoYXJndiwgdHJ1ZSk7XG5cblx0XHQvL2xldCB5bCA9IGZzWWFybkxvY2socm9vdERhdGEucm9vdCk7XG5cblx0XHRpZiAoYXJndi5kdXBsaWNhdGUgfHwgIWFyZ3YuZHVwbGljYXRlKVxuXHRcdHtcblx0XHRcdF9zaG93WWFybkxvY2tMaXN0KGFyZ3YpXG5cdFx0fVxuXG5cdH0sXG5cbn0pO1xuXG5leHBvcnQgPSBjbWRNb2R1bGVcblxudHlwZSBJVW5wYWNrQ21kTW9kPFQgZXh0ZW5kcyBDb21tYW5kTW9kdWxlLCBEID0gSVVucGFja015WWFyZ3NBcmd2PiA9IFQgZXh0ZW5kcyBDb21tYW5kTW9kdWxlPGFueSwgaW5mZXIgVT4gPyBVXG5cdDogVCBleHRlbmRzIENvbW1hbmRNb2R1bGU8aW5mZXIgVSwgYW55PiA/IFVcblx0XHQ6IERcblx0O1xuXG5mdW5jdGlvbiBfaXMoYXJndjogQXJndW1lbnRzPElVbnBhY2tDbWRNb2Q8dHlwZW9mIGNtZE1vZHVsZT4+KTogYXJndiBpcyBBcmd1bWVudHM8SVVucGFja0NtZE1vZDx0eXBlb2YgY21kTW9kdWxlPj5cbntcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIF9maXgoYXJndjogQXJndW1lbnRzPElVbnBhY2tDbWRNb2Q8dHlwZW9mIGNtZE1vZHVsZT4+KVxue1xuXHRyZXR1cm4gYXJndjtcbn1cblxuZnVuY3Rpb24gX3Nob3dZYXJuTG9ja0xpc3QoYXJndjogQXJndW1lbnRzPElVbnBhY2tDbWRNb2Q8dHlwZW9mIGNtZE1vZHVsZT4+KTogYXJndiBpcyBBcmd1bWVudHM8SVVucGFja0NtZE1vZDx0eXBlb2YgY21kTW9kdWxlPj5cbntcblx0bGV0IHJvb3REYXRhID0gZmluZFJvb3QoYXJndiwgdHJ1ZSk7XG5cblx0bGV0IHlsID0gZnNZYXJuTG9jayhyb290RGF0YS5yb290KTtcblxuXHRsZXQgeWFybmxvY2tfb2xkX29iaiA9IHBhcnNlWWFybkxvY2soeWwueWFybmxvY2tfb2xkKTtcblxuXHRsZXQgZnkgPSBleHBvcnRZYXJuTG9jayh5YXJubG9ja19vbGRfb2JqKTtcblxuXHRsZXQga3MgPSBPYmplY3Qua2V5cyhmeS5pbnN0YWxsZWQpO1xuXG5cdGxldCBtYXggPSAwO1xuXHRsZXQgbGVuID0gMDtcblxuXHRsZXQga3MyID0ga3Ncblx0XHQucmVkdWNlKChhLCBuYW1lKSA9PiB7XG5cblx0XHRcdGxldCBhcnIgPSBmeS5pbnN0YWxsZWRbbmFtZV07XG5cblx0XHRcdGlmICghYXJndi5kdXBsaWNhdGUgfHwgYXJyLmxlbmd0aCA+IDEpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKG5hbWUpO1xuXG5cdFx0XHRcdHRyeVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YXJyID0gYXJyLnNvcnQocmNvbXBhcmUpLnJldmVyc2UoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaCAoZSlcblx0XHRcdFx0e1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgYXJyMiA9IGFyci5zbGljZSgwLCAtMSk7XG5cblx0XHRcdFx0aWYgKGFycjIubGVuZ3RoKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ+KUnOKUgCcsIGFycjIuam9pbignXFxu4pSc4pSAICcpKTtcblxuXHRcdFx0XHRcdGxlbiArPSBhcnIyLmxlbmd0aDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfilJTilIAnLCBhcnJbYXJyLmxlbmd0aCAtIDFdKTtcblxuXHRcdFx0XHRtYXggPSBNYXRoLm1heChtYXgsIGFyci5sZW5ndGgpO1xuXG5cdFx0XHRcdGEucHVzaChuYW1lKVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYTtcblx0XHR9LCBbXSBhcyBzdHJpbmdbXSlcblx0O1xuXG5cdGxldCBjaGFsayA9IGNvbnNvbGUuY2hhbGs7XG5cblx0aWYgKGFyZ3YuZHVwbGljYXRlKVxuXHR7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnNvbGUuY3lhbi5pbmZvKGBcXG5Gb3VuZCBkdXBsaWNhdGUgaW4gJHtjaGFsay55ZWxsb3coa3MyLmxlbmd0aCl9IHBhY2thZ2VzLCAke2NoYWxrLnllbGxvdyhsZW4pfS8ke2NoYWxrLnllbGxvdyhsZW4ra3MyLmxlbmd0aCl9IGluc3RhbGxlZCB2ZXJzaW9uLCBoaWdoZXN0IGlzICR7bWF4fSwgaW4gdG90YWwgJHtrcy5sZW5ndGh9IHBhY2thZ2VzYCk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnNvbGUuY3lhbi5pbmZvKGBcXG5Ub3RhbCAke2NoYWxrLnllbGxvdyhrcy5sZW5ndGgpfSBwYWNrYWdlcywgd2l0aCAke2NoYWxrLnllbGxvdyhsZW4pfS8ke2NoYWxrLnllbGxvdyhsZW4ra3MyLmxlbmd0aCl9IGluc3RhbGxlZCB2ZXJzaW9uYCk7XG5cdH1cblxuXHRpZiAobGVuID4gMClcblx0e1xuXHRcdGNvbnN0IHRlcm1pbmFsTGluayA9IHJlcXVpcmUoJ3Rlcm1pbmFsLWxpbmsnKTtcblx0XHRjb25zdCBsaW5rID0gdGVybWluYWxMaW5rKCdzZWUgaGVyZScsICdodHRwczovL3lhcm5wa2cuY29tL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnMvJywge1xuXHRcdFx0ZmFsbGJhY2sodGV4dCwgdXJsKVxuXHRcdFx0e1xuXHRcdFx0XHRyZXR1cm4gdGV4dCArICcgJyArIHVybDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnNvbGUuY3lhbi5pbmZvKGBZb3UgY2FuIHRyeSBhZGQgdGhleSB0byAke2NvbnNvbGUuY2hhbGsueWVsbG93KCdyZXNvbHV0aW9ucycpfSBpbiBwYWNrYWdlLmpzb24sIGZvciBmb3JjZSBwYWNrYWdlIGRlZHVwZSwgJHtsaW5rfWApO1xuXHR9XG5cblx0cmV0dXJuIHRydWVcbn1cbiJdfQ==