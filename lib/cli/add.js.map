{"version":3,"file":"add.js","sourceRoot":"","sources":["add.ts"],"names":[],"mappings":";;AAAA;;GAEG;AACH,oCAAqC;AAErC,2DAA0E;AAE1E,SAAgB,YAAY,CAAC,IAE5B;IAEA,OAAO,iBAAS,CAAC;QAChB,KAAK;QACL,MAAM;QACN,UAAU;QACV,OAAO;QACP,OAAO;QACP,6BAA6B;QAC7B,OAAO;KACP,EAAE,IAAI,CAAC,CAAA;AACT,CAAC;AAbD,oCAaC;AAED,SAAgB,mBAAmB,CAAgB,KAAc;IAEhE,OAAO,KAAK;SACV,MAAM,CAAC,KAAK,EAAE;QACd,KAAK,EAAE,GAAG;QACV,IAAI,EAAE,sCAAsC;QAC5C,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,MAAM,EAAE;QACf,KAAK,EAAE,GAAG;QACV,IAAI,EAAE,uCAAuC;QAC7C,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,UAAU,EAAE;QACnB,KAAK,EAAE,GAAG;QACV,IAAI,EAAE,2CAA2C;QACjD,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,OAAO,EAAE;QAChB,KAAK,EAAE,GAAG;QACV,IAAI,EAAE,+CAA+C;QACrD,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,OAAO,EAAE;QAChB,KAAK,EAAE,GAAG;QACV,IAAI,EAAE,+CAA+C;QACrD,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,OAAO,EAAE;QAChB,IAAI,EAAE,+CAA+C;QACrD,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,MAAM,EAAE;QACf,IAAI,EAAE,QAAQ;QACd,YAAY,EAAE,IAAI;KAClB,CAAC;SACD,MAAM,CAAC,QAAQ,EAAE;QACjB,KAAK,EAAE,CAAC,GAAG,CAAC;QACZ,IAAI,EAAE,kCAAkC;QACxC,OAAO,EAAE,IAAI;QACb,OAAO,EAAE,IAAI;KACb,CAAC;SACD,MAAM,CAAC,6BAA6B,EAAE;QACtC,KAAK,EAAE,CAAC,GAAG,CAAC;QACZ,IAAI,EAAE,+CAA+C;QACrD,OAAO,EAAE,IAAI;KACb,CAAC,CAAA;AACJ,CAAC;AA/CD,kDA+CC;AAED,SAAgB,gBAAgB,CAAC,KAAa;IAE7C,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,qCAAqC,CAAC,CAAC;IAE3D,IAAI,CAAC,EACL;QACC,OAAO;YACN,KAAK;YACL,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;YACf,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;YACV,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;SACb,CAAA;KACD;AACF,CAAC;AAbD,4CAaC;AAED,SAAgB,WAAW,CAAC,KAAe;IAE1C,OAAO,2CAAsB,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;QAExD,IAAI,CAAC,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;QAE5B,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,IAAI,EAC/B;YACC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;SAC1B;QAED,OAAO,CAAC,CAAC;IACV,CAAC,EAAE,EAAc,CAAC,CAAC,CAAC;AACrB,CAAC;AAbD,kCAaC;AAED,SAAgB,kBAAkB,CAAC,IAAY,EAC9C,GAAgG;IAGhG,OAAO,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC;WACzB,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC;WACzB,GAAG,CAAC,oBAAoB,CAAC,IAAI,CAAC,CACjC;AACF,CAAC;AARD,gDAQC;AAED,kBAAe,YAAY,CAAC","sourcesContent":["/**\n * Created by user on 2019/4/30.\n */\nimport { lazyFlags } from '../index';\nimport { Argv, Omit } from 'yargs';\nimport { array_unique, array_unique_overwrite } from 'array-hyper-unique';\n\nexport function flagsYarnAdd(argv: {\n\t[k: string]: boolean,\n}): string[]\n{\n\treturn lazyFlags([\n\t\t'dev',\n\t\t'peer',\n\t\t'optional',\n\t\t'exact',\n\t\t'tilde',\n\t\t'ignore-workspace-root-check',\n\t\t'audit',\n\t], argv)\n}\n\nexport function setupYarnAddToYargs<T extends any>(yargs: Argv<T>)\n{\n\treturn yargs\n\t\t.option('dev', {\n\t\t\talias: 'D',\n\t\t\tdesc: `install packages to devDependencies.`,\n\t\t\tboolean: true,\n\t\t})\n\t\t.option('peer', {\n\t\t\talias: 'P',\n\t\t\tdesc: `install packages to peerDependencies.`,\n\t\t\tboolean: true,\n\t\t})\n\t\t.option('optional', {\n\t\t\talias: 'O',\n\t\t\tdesc: `install packages to optionalDependencies.`,\n\t\t\tboolean: true,\n\t\t})\n\t\t.option('exact', {\n\t\t\talias: 'E',\n\t\t\tdesc: `see https://yarnpkg.com/lang/en/docs/cli/add/`,\n\t\t\tboolean: true,\n\t\t})\n\t\t.option('tilde', {\n\t\t\talias: 'T',\n\t\t\tdesc: `see https://yarnpkg.com/lang/en/docs/cli/add/`,\n\t\t\tboolean: true,\n\t\t})\n\t\t.option('audit', {\n\t\t\tdesc: `see https://yarnpkg.com/lang/en/docs/cli/add/`,\n\t\t\tboolean: true,\n\t\t})\n\t\t.option(`name`, {\n\t\t\ttype: 'string',\n\t\t\tdemandOption: true,\n\t\t})\n\t\t.option('dedupe', {\n\t\t\talias: ['d'],\n\t\t\tdesc: `Data deduplication for yarn.lock`,\n\t\t\tboolean: true,\n\t\t\tdefault: true,\n\t\t})\n\t\t.option('ignore-workspace-root-check', {\n\t\t\talias: ['W'],\n\t\t\tdesc: `see https://yarnpkg.com/lang/en/docs/cli/add/`,\n\t\t\tboolean: true,\n\t\t})\n}\n\nexport function parseArgvPkgName(input: string)\n{\n\tlet m = input.match(/^(?:(@[^\\/]+)\\/)?([^@]+)(?:@(.+))?$/);\n\n\tif (m)\n\t{\n\t\treturn {\n\t\t\tinput,\n\t\t\tnamespace: m[1],\n\t\t\tname: m[2],\n\t\t\tversion: m[3],\n\t\t}\n\t}\n}\n\nexport function listToTypes(input: string[])\n{\n\treturn array_unique_overwrite(input.reduce(function (a, b)\n\t{\n\t\tlet m = parseArgvPkgName(b);\n\n\t\tif (m && !m.namespace && m.name)\n\t\t{\n\t\t\ta.push(`@types/${m.name}`)\n\t\t}\n\n\t\treturn a;\n\t}, [] as string[]));\n}\n\nexport function existsDependencies(name: string,\n\tpkg: Record<'dependencies' | 'devDependencies' | 'optionalDependencies', Record<string, string>>,\n)\n{\n\treturn pkg.dependencies[name]\n\t\t|| pkg.devDependencies[name]\n\t\t|| pkg.optionalDependencies[name]\n\t;\n}\n\nexport default flagsYarnAdd;\n"]}